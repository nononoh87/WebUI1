<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script type="text/javascript">
//----------------------------------------------------------
// 4. 지역변수를 참조하는 함수 안에 함수 클로저(closure)		
//			전역변수는 특정 함수 몇 개만 공유하지 못하고 전체가 공유하는 변수이다.
//			클로저는 특정 함수가 암묵적으로 다른 함수의 참조를 가지고 있기 때문에
//			호출되는 함수가 참조하는 함수의 메모리 공간을 참조한다. (?)
//			아무튼 클로저를 이용하여 전역변수의 사용을 줄일 수 있다

// 클로저의 핵심은 스코프를 이용해서, 변수의 접근 범위를 닫는(폐쇄)것에 있다.

/* 외부함수 스코프에서 내부함수 스코프로 접근 불가능하다.
내부함수에서는 외부함수 스코프에서 선언된 변수에 접근 기능하다.
따라서 내부 함수는 외부함수에 선언된 변수에 접근 가능하다. */


//------ 함수 선언
  function add(a,b,c){
	 let result = a+b; // 지역변수, var를 빼면 글로벌 변수가 됨 
	c(result);
	return function(){
		result++;
		return '공유결과?' + result;
	};
 }

//------ 함수 호출
var resultVar = add(10,20,function(res){
	document.write('결과 : ' + res + '<br/>');
}); 

document.write('리턴결과 : ' + resultVar() + '<hr/>')
document.write('리턴결과 : ' + resultVar() + '<hr/>')
document.write('리턴결과 : ' + resultVar() + '<hr/>')
result = 10000; // 글로벌변수
document.write('리턴결과2 : ' + resultVar() + '<hr/>')


</script>
</head>
<body>

</body>
</html>